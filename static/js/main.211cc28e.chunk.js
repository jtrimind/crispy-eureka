(this["webpackJsonpcrispy-eureka"]=this["webpackJsonpcrispy-eureka"]||[]).push([[0],{70:function(e,t,a){},71:function(e,t,a){},97:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(9),r=a.n(o),l=(a(70),a(10)),s=(a(71),a(27)),i=a(56),u=a(47),m=a.n(u),d=a(52),p=a(119),f=a(58),g=function(e){var t=e.name,a=e.tel,n=e.startTime,o=e.endTime,r=e.addr,l=function(){return c.a.createElement(p.a,null,c.a.createElement(f.a,null,t),c.a.createElement("ul",null,c.a.createElement("li",null,"\uc804\ud654\ubc88\ud638: ",a),c.a.createElement("li",null,"\uc601\uc5c5\uc2dc\uac04: ",n," ~ ",o),c.a.createElement("li",null,"\uc8fc\uc18c: ",r)),c.a.createElement("br",null))};return c.a.createElement("div",{"data-tippy-content":Object(s.renderToStaticMarkup)(c.a.createElement(l,null))},c.a.createElement(m.a,{path:d.a,size:1,horizontal:!0,vertical:!0,rotate:90,color:"red",spin:!0}))};var v=function(e){var t=e.latlng,a=e.storeList,o=e.onPositionChanged,r=e.keyword,u=e.gps,m=Object(n.useState)(null),d=Object(l.a)(m,2),p=d[0],f=d[1];Object(n.useEffect)((function(){var e=document.createElement("script");e.async=!0,e.src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=f5185fb09b4ee9df57bd6b168585bb8c&libraries=services&autoload=false",document.head.appendChild(e),e.onload=function(){f(window.kakao)}}),[]);var v=Object(n.useState)(null),E=Object(l.a)(v,2),b=E[0],O=E[1];return Object(n.useEffect)((function(){p&&p.maps.load((function(){var e=document.getElementById("map"),a={center:new p.maps.LatLng(t[0],t[1]),level:5};O(new p.maps.Map(e,a))}))}),[p]),Object(n.useEffect)((function(){b&&(p.maps.event.addListener(b,"dragend",(function(){var e=b.getCenter();o(e.getLat(),e.getLng())})),p.maps.event.addListener(b,"zoom_changed",(function(){b.getLevel()>5&&b.setLevel(5)})))}),[b]),Object(n.useEffect)((function(){b&&b.panTo(new p.maps.LatLng(t[0],t[1]))}),[t]),Object(n.useEffect)((function(){b&&a&&a.forEach((function(e){var t=new p.maps.LatLng(e.latlng[0],e.latlng[1]);new p.maps.CustomOverlay({content:Object(s.renderToStaticMarkup)(c.a.createElement(g,{name:e.name,tel:e.tel,startTime:e.startTime,endTime:e.endTime,addr:e.addr})),position:t}).setMap(b),Object(i.a)("[data-tippy-content]",{trigger:"click",hideOnClick:!0,allowHTML:!0})}))}),[a]),Object(n.useEffect)((function(){r&&(console.log("keyword:",r),(new p.maps.services.Places).keywordSearch(r,(function(e,t){if(console.log(t),console.log(e),t===p.maps.services.Status.OK){var a=e[0],n=a.y,c=a.x;console.log(n,c);var o=new p.maps.LatLng(n,c);b.panTo(o),b.setLevel(3)}})))}),[r]),Object(n.useEffect)((function(){if(u){console.log("gps:",u);var e=new p.maps.Size(24,35),t=new p.maps.MarkerImage("http://t1.daumcdn.net/localimg/localimages/07/2018/pc/img/marker_spot.png",e),a=new p.maps.LatLng(u[0],u[1]);new p.maps.Marker({map:b,position:a,image:t}).setMap(b)}}),[u]),c.a.createElement("div",{id:"map",className:"Map"})},E=a(34),b=a.n(E),O=a(53),w=a(54),h=a.n(w);var j=function(e){var t=e.latlng,a=e.onStoreListUpdated,o=e.renew,r=e.setRenew,s=Object(n.useState)([]),i=Object(l.a)(s,2),u=i[0],m=i[1],d=function(){var e=Object(O.a)(b.a.mark((function e(){var a,n,c,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://congenial-spoon.web.app/pharmacy",e.next=3,h.a.get("https://congenial-spoon.web.app/pharmacy",{params:{WGS84_LAT:t[0],WGS84_LON:t[1],numOfRows:30}});case 3:a=e.sent,console.log(a),200===a.status&&(n=a.data.response.body.items,console.log(n),n&&(c=n.item,o=c.map((function(e){return{name:e.dutyName,tel:e.dutyTel1,startTime:e.startTime,endTime:e.endTime,addr:e.dutyAddr,latlng:[e.latitude,e.longitude]}})),console.log(o),m(o)));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){d().catch((function(e){console.log(e)}))}),[t]),Object(n.useEffect)((function(){a(u)}),[u]),Object(n.useEffect)((function(){1==o&&(console.log("renew"),d().catch((function(e){console.log(e)})),r(!1))}),[o]),c.a.createElement("div",null)},k=a(128),L=a(55),y=a.n(L),S=a(127),T=a(122),C=a(123);var M=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],o=t[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement(k.a,{onClick:function(){o(!0)}},c.a.createElement(y.a,null)),c.a.createElement(S.a,{open:a},c.a.createElement(T.a,null,"\ub2f9\uc7a5\uc57d\uad6d\uc740?"),c.a.createElement(C.a,null,"\uc9c0\uae08 \ub2f9\uc7a5 \ucc3e\uc544\uac08 \uc218 \uc788\ub294 \uc57d\uad6d\uc744 \ubc14\ub85c \ud655\uc778\ud560 \uc218 \uc788\uac8c \uac1c\ubc1c\ub41c \uc11c\ube44\uc2a4 \uc785\ub2c8\ub2e4. \uad6d\ub9bd\uc911\uc559\uc758\ub8cc\uc6d0\uc5d0\uc11c \uacf5\uac1c\ud558\ub294 \uc804\uad6d \uc57d\uad6d \uc815\ubcf4\ub97c \ud1a0\ub300\ub85c \uc81c\uacf5\ub418\uba70, \ubcf8 \uc11c\ube44\uc2a4\uc5d0\uc11c \uc548\ub0b4\ub418\ub294 \uc57d\uad6d\uc758 \uc2e4\uc81c \uc601\uc5c5\uc5ec\ubd80\ub294 \uac01 \uc57d\uad6d\uc758 \uc0ac\uc815\uc5d0 \ub530\ub77c \ubcc0\ub3d9 \ub420 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \ubb38\uc758\uc0ac\ud56d :"),c.a.createElement(k.a,{onClick:function(){o(!1)}},"\ub2eb\uae30")))},N=a(124),G=a(129);var P=function(e){var t=e.onSearch,a=Object(n.useState)(""),o=Object(l.a)(a,2),r=o[0],s=o[1];return c.a.createElement("div",{className:"SearchBar"},c.a.createElement(N.a,{style:{color:"black"}}),c.a.createElement(G.a,{value:r,onChange:function(e){return s(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&t(r)}}))},z=a(125);var A=function(e){var t=e.setLatlng,a=e.setGps;return c.a.createElement("div",{className:"Gps"},c.a.createElement(k.a,{onClick:function(){"geolocation"in navigator?navigator.geolocation.getCurrentPosition((function(e){t([e.coords.latitude,e.coords.longitude]),a([e.coords.latitude,e.coords.longitude])}),(function(e){console.error("Error Code = "+e.code+" - "+e.message)})):console.log("Not Available")}},c.a.createElement(z.a,null)))},B=a(126);var R=function(){var e=Object(n.useState)([37,127]),t=Object(l.a)(e,2),a=t[0],o=t[1],r=Object(n.useState)([]),s=Object(l.a)(r,2),i=s[0],u=s[1],m=Object(n.useState)(""),d=Object(l.a)(m,2),p=d[0],f=d[1],g=Object(n.useState)(),E=Object(l.a)(g,2),b=E[0],O=E[1],w=Object(n.useState)(!1),h=Object(l.a)(w,2),L=h[0],y=h[1];return c.a.createElement("div",{className:"App"},c.a.createElement("div",{className:"Top"},"\ub2f9\uc7a5\uc57d\uad6d",c.a.createElement(M,null),c.a.createElement(P,{onSearch:f})),c.a.createElement("div",{className:"MapContent"},c.a.createElement("div",{className:"MapControl"},c.a.createElement(A,{setLatlng:o,setGps:O}),c.a.createElement("div",{className:"Renew"},c.a.createElement(k.a,{onClick:function(){y(!0)}},c.a.createElement(B.a,null)))),c.a.createElement(v,{latlng:a,onPositionChanged:function(e,t){console.log("position changed: "+e+" "+t),o([e,t])},storeList:i,keyword:p,gps:b})),c.a.createElement(j,{latlng:a,onStoreListUpdated:function(e){u(e)},renew:L,setRenew:y}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(R,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[97,1,2]]]);
//# sourceMappingURL=main.211cc28e.chunk.js.map